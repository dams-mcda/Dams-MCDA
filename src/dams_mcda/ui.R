# This is the user-interface definition of a Shiny web application

library(shiny)
library(dplyr, warn.conflicts=FALSE)
library(shinyjs, warn.conflicts=FALSE)
library(Cairo)
library(ggplot2)
library(RColorBrewer)
library(abind)
library(leaflet)
library(DT)

options(shiny.usecairo=TRUE)

source("server.R")

# default graph dimensions
graph_width <- "100%"
graph_height <- 500

# default map dimensions
map_width <- "100%"
map_height <- 500

# multiple used labels
fishSurvivalLabel <- "Sea-run fish habitat area is measured in hundreds of square meters. It is a proxy criteria estimated as possible upstream \
sea-run fish (Atlantic salmon, Alewife, Blueback herring, American eel) functional habitat (Roy et al., 2018). "
riverRecLabel <- "River recreation is measured in square kilometers. It is the estimated downstream area of river that may increase \
or decrease with a dam decision alternative, represents functional area for whitewater recreation defined by Roy et al. (2018)."
resStorageLabel <- "Reservoir storage is measured in cubic kilometers. It is the estimated storage potential of the reservoir, based\ 
on its volume (Roy et al., 2018)."
annuitizedProjCostsLabel <- "Annuitized project cost is measured in 2019 $USD/year. It is the estimated total project costs (capital \
and operation & maintenance) on an annual basis using a 6.2% discount rate and a 20-year financial lifetime."
breachDamageLabel <- "Breach damange potential is a unitless proxy for safety based on the State hazard rating, which indicates the \
potential for downstream property damage, injury, and death in the case of dam breach (Roy et al., 2018)."
numPropertiesLabel <- "Number of properties is the estimated number of properties impacted near the dam, based on potential changes \
in viewshed or property value (Roy et al., 2018). "
annualElectricityLabel <- "Annual electricity generation is measured in GWh/year. It is the 4-year average estimate based on licensee-reported \
site-specific electricity generation values reported to FERC annually. Estimates for Penobscot Mills project developments are based on site-specific\
average annual electricity generation values reported in the FERC license for the project)."
GHGEmissionsLabel <- "Annual carbon dioxide (CO2) emissions reduction is measured in metric kilotonnes of CO2/year. It is an  \
estimate of avoided carbon dioxide emissions from annual hydropower-generated electricity production (reservoir or diversion-design \
dams); based on decreasing generation from the State's electricity generation mix; includes life cycle emissions impacts."
indigenousLifewaysLabel <- "Indigenous cultural traditions and lifeways is a unitless rating to convey the importance of preserving\
or restoring the culture and practices of indigenous people."
townCityIdentityLabel <- "Town/city identity is a unitless rating to convey the importance of preserving the existing identity of \
the existing town/city identity for residents living along the river. Note: Users may slide bars to indicate level of preference, \
but as of May 2020 we do not have data for this criterion."
industrialHistoryLabel <- "Industrial historical importance is a unitless rating to convey the importance of preserving or restoring\
the industrial history of the site. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data \
for this criterion."
aestheticsLabel <- "Aesthetic value is a rating to convey the importance of improving or preserving the aesthetics (e.g, appearance,\
scenic value, smell, sound) at a dam site.Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data\
for this criterion."



# Define UI for Shiny web application
ui <- shinyUI(fluidPage(
	# used for toggling display of elements
	shinyjs::useShinyjs(),

	# next 5 lines for testing data passing through javascript
	includeScript("www/dams_mcda.js"),

	# link css
	tags$head(
		tags$link(rel = "stylesheet", type = "text/css", href = "dams_mcda.css")
	),

	# font-awesome, page banner/title, logout link
	HTML(
		'<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-zrnmn8R8KkWl12rAZFt4yKjxplaDaT7/EUkKm7AovijfrQItFWR7O/JJn4DAa/gx" crossorigin="anonymous">\
		<div id="app-logout"><a href="/logout/"><i class="fas fa-sign-out-alt"></i>&nbsp;Logout</a></div>\
		<div id="page-title">Dam Decision Support Tool</div>'
	),

	# total progress tracker on bottom of screen
	div( id="progress-tracker", htmlOutput("TotalProgress")),

	# navigation buttons
	div(id="nav-buttons", actionButton("Prev_Tab", "Previous"), actionButton("Next_Tab", "Next")),

	navlistPanel(
		id="navListPanel",
		# Define layout widths
		widths = c(2,10),

		# --------------------------------------------------------------------------------
		# Define Instructions tab
		# --------------------------------------------------------------------------------
		HTML("<li class='step-label'>Step 1: Start Here</li>"),
		tabPanel("Start Here",
			icon=icon("home"),
			h2("Welcome!"),

			img(src = 'River1.jpg', width="50%", align = "right", style="margin:0.2em 0 0.2em 1em;"),

			HTML(
				"<p>This <b>free and open source</b> tool was developed to aid people like you in considering tradeoffs associated with dams. It can help support your consideration of possible decision alternatives (e.g. keep and maintain dam, \
				 improve hydropower generation, improve fish passage) for hydropower dams, and could potentially be tailored toward other types of dam decisions. The tool generates a data-driven recommendation for Federal Energy Regulatory Commission \
				 (FERC) licensed hydropower dams in Maine's Penobscot River, based on your preferences. This tool is based on the Weighted Sum approach to Multi-Criteria Decision Analysis (MCDA) to compare decision-maker preferences for decision criteria \
				 (e.g., annuitized cost, CO2 equivalent emissions reductions, sea-run fish habitat area, etc.) for hydropower dams with FERC license expiration dates in the next 10 years. The tool gathers user inputs and calculates a ranked set of decision \
				 alternatives for each dam. Then, the tool shows the top-ranked set of decision alternatives for multiple dams. The purpose of the combined output is to encourage you to consider dams on the river as a system, in addition to one at a time.\ <br>
				 <br><b>NOTE:</b> The results from this decision support tool are not official to any FERC licensing process and do not in any way represent the ruling of FERC.<br></p>"
			),

			helpText(
			  HTML('<a href = "BackgroundDamDecisionSupportTool.pdf" target="_blank">Click for background on the Dam Decision Support Tool</a>')
			  ),
			helpText(
			  HTML('<a href = "Tool_Instructions.pdf" target="_blank">Click for instructions on how to use the Dam Decision Support Tool</a>')
			),
			helpText(
			  HTML('<a href = "https://www.ferc.gov/industries/hydropower/gen-info/licensing/ilp.asp" target="_blank">Click for more information about the FERC Integrated Licensing Process</a>')
			  ),

			HTML(
				"<h4>More Information:</h4>\

				The Penobscot River is home to many dams and supports valuable ecosystem services. The watershed inclues pristine natural lakes, clean water sources, and significant biodiversity, including several sea-run fish species (e.g. Atlantic salmon, American eel, \
				Blueback herring, and Alewife). Dams also provide important services: reservoirs for drinking water and recreation, flood protection, and generation of reliable, on-demand renewable hydropower, critical to reducing fossil-fuel emissions that contribute \
				to climate change and poor human health. However, all dams need regular maintenance and older dams may need more extensive repairs as they age. Dams may interrupt flows and prevent sea-run fish passage, contributing to large population declines. \
				They may also contribute to poor water quality downstream, increased predation, and climate change (decaying plant matter in reservoirs release methane into the atmosphere). Dams have long threatened indigenous cultural traditions, while at the same \
				time helping to shape post-industrial town or city identities over the last two centuries.<br>"
			 ),

			helpText(
			  HTML(
				  '<a href = "http://www.pnas.org/content/early/2018/10/31/1807437115" target="_blank">Click HERE for more information about the tradeoffs involved in dam decision making</a>')
			  )
		  ),


		# --------------------------------------------------------------------------------
		# Interactive Dam Map Tab
		# --------------------------------------------------------------------------------
		HTML("<li class='step-label'> Step 2: View Dam Map </li>"),
		tabPanel("View Dam Map",
			htmlOutput("Map1"), # status and title
			h2("View Existing FERC Dams Map"),
			HTML("Please consider the following dams on the Penobscot River. These non-federally owned dams are coming up for FERC relicensing within the next 10 years. These are the dams you will focus on \
				for the rest of the activity. Note: although the Penobscot Mills Project dams are licensed together under a single FERC license, we separate them here for consistency. \
				Hover over the dams on the map for more information on each site.<br>"
			),
			helpText(
				HTML('<a href="DecisionAlternativesDescriptions.pdf" target="_blank">Click for more information about dam decision alternatives</a><br>')
			),
			helpText(
				HTML('<a href="DecisionCriteriaDescriptions.pdf" target="_blank">Click for more information about decision criteria</a><br>')
			),
			helpText(
			  HTML('<a href="DecisionMatrices_updated.xlsx" target="_blank">Click to download Dam Data.</a><br>')
			),
			HTML(
				"You may wish to refer to the resource links above and the watershed map below throughout the activity. <br>"
			),
			leafletOutput("dam_map", width=map_width, height=map_height)

		),


		# --------------------------------------------------------------------------------
		# Preference Elicitation Tool
		# --------------------------------------------------------------------------------
		HTML("<li class='step-label'> Step 3: Enter Preferences </li>"),
		# ----------------------------------------
		# West Enfield Dam
		# ----------------------------------------
		tabPanel(
			 # tab button text
			 htmlOutput("Dam1"),

			 # tab content
			h2("West Enfield Dam (FERC No. P-2600)"),
			HTML('Please consider and rate your preference for the decision criteria listed below for West Enfield Dam. <a href="Factsheet_WestEnfield.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_WestEnfield.pdf" target="_blank">Open in new tab</a>. \
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
         bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "WestEnfield_DamDataTable_updated.pdf" target="_blank">Click to view West Enfield Data</a>.<br>\
         <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\ 
				 increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
				 <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam1Progress"),

			#----------------------------------------
			# Criteria Inputs for West Enfield Dam
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-1",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat1", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-1",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec1", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-1",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir1", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-1",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost1", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-1",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage1", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-1",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties1", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-1",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration1", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-1",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions1", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-1",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways1", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-1",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory1", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#townCityIdentity
			div(id="townCity-1",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity1", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-1",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics1", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			# update alt 1 score
			htmlOutput("UpdateDam1Progress"),
			actionButton("updateBtn1", "Update")

		), # End West Enfield Dam Tab

		# ----------------------------------------
		# Medway Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam2"),

			# tab content
			h2("Medway Dam (FERC No. P-2666)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for Medway Dam. <a href="Factsheet_Medway.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_Medway.pdf" target="_blank">Open in new tab</a>.<br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "Medway_DamDataTable_updated.pdf" target="_blank">Click to view Medway Data</a>. <br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\ 
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam2Progress"),

			#----------------------------------------
			# Criteria Inputs for Alt 2
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-2",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat2", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-2",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec2", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-2",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir2", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-2",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost2", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-2",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage2", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-2",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties2", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-2",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration2", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-2",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions2", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-2",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways2", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-2",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory2", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#TownCityIdentity
			div(id="townCity-2",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity2", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-2",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics2", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			htmlOutput("UpdateDam2Progress"),
			actionButton("updateBtn2", "Update")

		), # End Medway Dam Tab


		# ----------------------------------------
		# East Millinocket Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam3"),

			# tab content
			h2("East Millinocket Dam (FERC No. P-2458)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for East Millinocket Dam. <a href="Factsheet_PenobscotMills.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_PenobscotMills.pdf" target="_blank">Open in new tab</a>. <br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "PenobscotMills_DamDataTable_updated.pdf" target="_blank">Click to view Penobscot Mills Data (PDF has information on all 5 dams, scroll to view)</a>.<br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\ 
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam3Progress"),

			#----------------------------------------
			# Criteria Inputs for East Millinocket Dam
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-3",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat3", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-3",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec3", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-3",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir3", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-3",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost3", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-3",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage3", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-3",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties3", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-3",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration3", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-3",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions3", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-3",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways3", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-3",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory3", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#TownCityIdentity
			div(id="townCity-3",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity3", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-3",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics3", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			htmlOutput("UpdateDam3Progress"),
			actionButton("updateBtn3", "Update")

		), # End East Millinocket Dam


		# ----------------------------------------
		# DOlby Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam4"),

			# tab content
			h2("Dolby Dam (FERC No. P-2458)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for Dolby Dam. <a href="Factsheet_PenobscotMills.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_PenobscotMills.pdf" target="_blank">Open in new tab</a><br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "PenobscotMills_DamDataTable_updated.pdf" target="_blank">Click to view Penobscot Mills Data (PDF has information on all 5 dams, scroll to view)</a>.<br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\ 
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),

			htmlOutput("Dam4Progress"),

			#----------------------------------------
			# Criteria Inputs for Dolby Dam
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-4",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat4", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-4",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec4", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-4",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir4", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-4",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost4", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-4",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage4", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-4",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties4", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-4",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration4", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-4",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions4", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-4",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways4", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-4",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory4", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#TownCityIdentity
			div(id="townCity-4",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity4", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-4",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics4", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			htmlOutput("UpdateDam4Progress"),
			actionButton("updateBtn4", "Update")

		), # End Dolby Dam Tab


		# ----------------------------------------
		# North Twin Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam5"),

			# tab content
			h2("North Twin Dam (FERC No. P-2458)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for North Twin Dam. <a href="Factsheet_PenobscotMills.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_PenobscotMills.pdf" target="_blank">Open in new tab</a>. <br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "PenobscotMills_DamDataTable_updated.pdf" target="_blank">Click to view Penobscot Mills Data (PDF has information on all 5 dams, scroll to view)</a><br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam5Progress"),

			#----------------------------------------
			# Criteria Inputs for North Twin Dam
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-5",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat5", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-5",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec5", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-5",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir5", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-5",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost5", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-5",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage5", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-5",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties5", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-5",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration5", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-5",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions5", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-5",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways5", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-5",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory5", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#TownCityIdentity
			div(id="townCity-5",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity5", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-5",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics5", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			htmlOutput("UpdateDam5Progress"),
			actionButton("updateBtn5", "Update")

		), # End North Twin Dam Tab


		#----------------------------------------
		# Millinocket/Quakish Dam
		#----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam6"),

			# tab content
			h2("Millinocket/Quakish Dam (FERC No. P-2458)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for Millinocket/Quakish Dam. <a href="Factsheet_PenobscotMills.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_PenobscotMills.pdf" target="_blank">Open in new tab</a>. <br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "PenobscotMills_DamDataTable_updated.pdf" target="_blank">Click to view Penobscot Mills Data (PDF has information on all 5 dams, scroll to view)</a>. <br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\ 
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam6Progress"),

		  #----------------------------------------
		  # Criteria Inputs for Millinocket/Quakish Dam
		  #----------------------------------------
		  #Fish Survival
		  div(id="fish-survival-6",
		      h3("Sea-Run Fish Habitat Area"),
		      sliderInput(inputId = "FishHabitat6", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #River Recreation
		  div(id="river-rec-6",
		      h3("River Recreation"),
		      sliderInput(inputId = "RiverRec6", label = riverRecLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Reservoir Storage
		  div(id="res-storage-6",
		      h3("Reservoir Storage"),
		      sliderInput(inputId = "Reservoir6", label = resStorageLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Annuitized Project Costs
		  div(id="ann-proj-costs-6",
		      h3("Annuitized Project Costs"),
		      sliderInput(inputId = "ProjectCost6", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Breach Damage Potential
		  div(id="breach-damage-6",
		      h3("Breach Damage Potential"),
		      sliderInput(inputId = "BreachDamage6", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Number of Properties
		  div(id="num-prop-6",
		      h3("Number of Properties"),
		      sliderInput(inputId = "NumProperties6", label = numPropertiesLabel, value=0, min=0, max=100, step =5)
		  ),
		  #Annual Electricity Generation
		  div(id="ann-elec-gen-6",
		      h3("Annual Electricity Generation"),
		      sliderInput(inputId = "ElectricityGeneration6", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #GHGEmissions
		  div(id="ghg-emissions-6",
		      h3("Annual CO2 Emissions Reductions"),
		      sliderInput(inputId = "AvoidEmissions6", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #IndigenousLifeways
		  div(id="indig-lifeways-6",
		      h3("Indigenous Cultural Traditions and Lifeways"),
		      sliderInput(inputId = "IndigenousLifeways6", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #IndustrialHistory
		  div(id="industrial-6",
		      h3("Industrial Historical Importance"),
		      sliderInput(inputId = "IndustrialHistory6", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #TownCityIdentity
		  div(id="townCity-6",
		      h3("Town/City Identity"),
		      sliderInput(inputId = "TownCityIdentity6", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Aesthetics
		  div(id="aesthetics-6",
		      h3("Aesthetic Value"),
		      sliderInput(inputId = "Aesthetics6", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
		  ),


		  htmlOutput("UpdateDam6Progress"),
		  actionButton("updateBtn6", "Update")

		), # End Millinocket/Quakish Dam Tab


		# ----------------------------------------
		# Millinocket Lake Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam7"),

			# tab content
			h2("Millinocket Lake Dam (FERC No. P-2458)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for Millinocket Lake Dam. <a href="Factsheet_PenobscotMills.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_PenobscotMills.pdf" target="_blank">Open in new tab</a>. <br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "PenobscotMills_DamDataTable_updated.pdf" target="_blank">Click to view Penobscot Mills Data (PDF has information on all 5 dams, scroll to view)</a>. <br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam7Progress"),

		  #----------------------------------------
		  # Criteria Inputs for Millinocket Lake Dam
		  #----------------------------------------
		  #Fish Survival
		  div(id="fish-survival-7",
		      h3("Sea-Run Fish Habitat Area"),
		      sliderInput(inputId = "FishHabitat7", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #River Recreation
		  div(id="river-rec-7",
		      h3("River Recreation"),
		      sliderInput(inputId = "RiverRec7", label = riverRecLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Reservoir Storage
		  div(id="res-storage-7",
		      h3("Reservoir Storage"),
		      sliderInput(inputId = "Reservoir7", label = resStorageLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Annuitized Project Costs
		  div(id="ann-proj-costs-7",
		      h3("Annuitized Project Costs"),
		      sliderInput(inputId = "ProjectCost7", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Breach Damage Potential
		  div(id="breach-damage-7",
		      h3("Breach Damage Potential"),
		      sliderInput(inputId = "BreachDamage7", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Number of Properties
		  div(id="num-prop-7",
		      h3("Number of Properties"),
		      sliderInput(inputId = "NumProperties7", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Annual Electricity Generation
		  div(id="ann-elec-gen-7",
		      h3("Annual Electricity Generation"),
		      sliderInput(inputId = "ElectricityGeneration7", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #GHGEmissions
		  div(id="ghg-emissions-7",
		      h3("Annual CO2 Emissions Reductions"),
		      sliderInput(inputId = "AvoidEmissions7", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #IndigenousLifeways
		  div(id="indig-lifeways-7",
		      h3("Indigenous Cultural Traditions and Lifeways"),
		      sliderInput(inputId = "IndigenousLifeways7", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #IndustrialHistory
		  div(id="industrial-7",
		      h3("Industrial Historical Importance"),
		      sliderInput(inputId = "IndustrialHistory7", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #TownCityIdentity
		  div(id="townCity-7",
		      h3("Town/City Identity"),
		      sliderInput(inputId = "TownCityIdentity7", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
		  ),
		  #Aesthetics
		  div(id="aesthetics-7",
		      h3("Aesthetic Value"),
		      sliderInput(inputId = "Aesthetics7", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
		  ),


			htmlOutput("UpdateDam7Progress"),
			actionButton("updateBtn7", "Update")

		), # End Millinocket Lake Dam Tab


		# ----------------------------------------
		# Ripogenus Dam
		# ----------------------------------------
		tabPanel(
			# tab button text
			htmlOutput("Dam8"),

			# tab content
			h2("Ripogenus Dam (FERC No. P-2572)"),

			HTML('Please consider and rate your preference for the decision criteria listed below for Ripogenus Dam. <a href="Factsheet_Ripogenus.pdf" download>Download Dam Factsheet</a> or <a href="Factsheet_Ripogenus.pdf" target="_blank">Open in new tab</a>. <br>\
				 Move the slider bar for each decision criterion you care about to a position that represents the relative amount of preference you have for that decision criterion compared to others in the list. Once you have made your selections, click UPDATE at the \
			     bottom of the page when you are done moving the slider bars to mark this tab Complete. <a href = "Ripogenus_DamDataTable_updated.pdf" target="_blank">Click to view Ripogenus Data</a>. <br>\
			     <br><b>Warning: decision criteria ratings must sum to 100!</b> The tracking indicator will help you keep track of the sum. Be aware that decision criteria are directly compensating (i.e., if the sum of all ratings is 100, then\
			     increasing the rating on one criterion requires another criterion rating to decrease to keep the sum equal to 100). <br>\
			     <br><b>For ratings, 0 = not at all important and 100 = extremely important.</b><br>'
			),
			htmlOutput("Dam8Progress"),

			#----------------------------------------
			# Criteria Inputs for Ripogenus Dam
			#----------------------------------------
			#Fish Survival
			div(id="fish-survival-8",
				h3("Sea-Run Fish Habitat Area"),
				sliderInput(inputId = "FishHabitat8", label = fishSurvivalLabel, value=0, min=0, max=100, step = 5)
			),
			#River Recreation
			div(id="river-rec-8",
				h3("River Recreation"),
				sliderInput(inputId = "RiverRec8", label = riverRecLabel, value=0, min=0, max=100, step = 5)
			),
			#Reservoir Storage
			div(id="res-storage-8",
				h3("Reservoir Storage"),
				sliderInput(inputId = "Reservoir8", label = resStorageLabel, value=0, min=0, max=100, step = 5)
			),
			#Annuitized Project Costs
			div(id="ann-proj-costs-8",
				h3("Annuitized Project Costs"),
				sliderInput(inputId = "ProjectCost8", label = annuitizedProjCostsLabel, value=0, min=0, max=100, step = 5)
			),
			#Breach Damage Potential
			div(id="breach-damage-8",
				h3("Breach Damage Potential"),
				sliderInput(inputId = "BreachDamage8", label = breachDamageLabel, value=0, min=0, max=100, step = 5)
			),
			#Number of Properties
			div(id="num-prop-8",
				h3("Number of Properties"),
				sliderInput(inputId = "NumProperties8", label = numPropertiesLabel, value=0, min=0, max=100, step = 5)
			),
			#Annual Electricity Generation
			div(id="ann-elec-gen-8",
				h3("Annual Electricity Generation"),
				sliderInput(inputId = "ElectricityGeneration8", label = annualElectricityLabel, value=0, min=0, max=100, step = 5)
			),
			#GHGEmissions
			div(id="ghg-emissions-8",
				h3("Annual CO2 Emissions Reductions"),
				sliderInput(inputId = "AvoidEmissions8", label = GHGEmissionsLabel, value=0, min=0, max=100, step = 5)
			),
			#IndigenousLifeways
			div(id="indig-lifeways-8",
				h3("Indigenous Cultural Traditions and Lifeways"),
				sliderInput(inputId = "IndigenousLifeways8", label = indigenousLifewaysLabel, value=0, min=0, max=100, step = 5)
			),
			#IndustrialHistory
			div(id="industrial-8",
				h3("Industrial Historical Importance"),
				sliderInput(inputId = "IndustrialHistory8", label = industrialHistoryLabel, value=0, min=0, max=100, step = 5)
			),
			#TownCityIdentity
			div(id="townCity-8",
				h3("Town/City Identity"),
				sliderInput(inputId = "TownCityIdentity8", label = townCityIdentityLabel, value=0, min=0, max=100, step = 5)
			),
			#Aesthetics
			div(id="aesthetics-8",
				h3("Aesthetic Value"),
				sliderInput(inputId = "Aesthetics8", label = aestheticsLabel, value=0, min=0, max=100, step = 5)
			),


			htmlOutput("UpdateDam8Progress"),
			actionButton("updateBtn8", "Update")

		), # End Ripogenus Dam Tab

		# --------------------------------------------------------------------------------
		# Combined Results Tab
		# --------------------------------------------------------------------------------
		HTML("<li> Step 4: Multi-Dam Results </li>"),

		tabPanel("Combined Results",
		  h2('Multi-Dam Results'),

		  HTML("<br>Click GENERATE to get MCDA results graphs.<br>"),
		  actionButton("generateOutput", "Generate", icon=icon("chart-bar")), # generate event

		  div(id="combined-output",
			  h2('Overview'),
			  HTML(
				   "<br>Based on the preference values you entered for each dam in Step 3 and the data we collected/generated previously about what will happen to each decision criterion if each of the five decision alternatives is adopted, we \
				   have aggregated the top decision alternatives for the entire set of dams. In the figures below, you can compare the numeric score for each dam across decision \
				   criteria and decision alternatives. Step 5 (individual dams) results provide more detail about each individual dam. \
				   The outcome presented here is a recommendation designed to support the consideration of multiple dams, but the aggregated result shown here may not be optimal for coordinated, multi-dam decision making as described in Roy et al. (2018).\
           This result is intended to support brainstorming about what single-dam decision making means for the river. This recommendation is not representative of any federal agency prescription or license ruling from FERC.<br>\
				   <br><br><b>Questions for consideration:</b> Do these results match your expectations? If not, why? If you feel discomfort at the result, you can return to the dam tabs and re-evaluate your decision criteria ratings. Remember to press \"Update\" under each tab. Then, return to this page and click GENERATE\
				   once more to see how your results change (note: you may want to download your results from this session, first).Do these results make sense, given the tradeoffs you made in balancing the set of decision criteria for each dam? Recall that the decision criteria are fully compensating, meaning that as the preference value for one decision criterion increases, the value for another \
				   decision criterion must necessarily decrease. The idea here is to emphasize tradeoffs between decision criteria.<br>"
			  ),

				h3('Figure 1. Comparison of Final MCDA Score for each Decision Alternative at each Dam'),
				plotOutput("CombinedPlot3", height="35em"),
				downloadButton("DownloadCombinedPlot3", "Download Graph", style="width:100%"),
				HTML("<br><br><b>Results Interpretation</b> for Figure 1. This graph shows the final MCDA score for each decision alternative at each dam. The taller the bar, the more preferred the decision alternative is. Use this graph to quickly see which decision\
					 alternative is the most highly ranked for each dam and to see how close the \"next-best\" decision alternative was to the top-ranked decision alternative. Small differences between scores for decision alternatives may signal \
					 a need to carefully consider multiple top-ranked alternatives for a specific dam for your final decision.<br>"),

				h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Top-Ranked Dam Decision Alternatives'),
				plotOutput("CombinedPlot2", height="35em"),
				downloadButton("DownloadCombinedPlot2", "Download Graph", style="width:100%;"),
				HTML("<br><br><b>Results Interpretation</b> for Figure 2. This graph shows the final MCDA score for the top-ranked decision alternative for each dam, broken down by the relative contribution of each decision criterion to the final MCDA score. \
					 Use this graph to give you an idea of how decision criteria scores (normalized data values x user-defined preference values) contribute to the final decision alternative selection for each dam. Consider this graph kind of a \"zoom-in\" \
					 on the tallest bar for each dam in Figure 2.<br>"),

				h3('Figure 3. Comparison of User-Defined Preferences for each Dam'),
				plotOutput("CombinedPlot1", height="35em"),
				downloadButton("DownloadCombinedPlot1", "Download Graph", style="width:100%;"),
				HTML("<br><br><b>Results Interpretation</b> for Figure 3. This graph shows the results of the Step 3 Preference Elicitation. The numbers presented on the graph correspond to the position of the slider bars you moved in Step 3. \
					 Use this graph to see how your preferences for each decision criterion vary across dam sites. For example, did you mark the same preference value for River Recreation for Ripogenus as for West Enfield? Are your fish \
					 habitat preferences consistent across all dams? This graph is a good reality check to help you make sure you entered the right preferences in Step 3 for you. If you did not move the slider for a specific decision criterion \
					 for any dam, it will not show up in this graph. For example, if you left the slider for River Recreation at zero for all dams, River Recreation will not appear in the graph or legend on this page. The numbers in this graph \
					 do not include any researched data values for decision criteria (i.e., the data we compiled and/or calculated ahead of time and presented in the dam data for each dam). The graph only shows your own stated preference \
					 values from Step 3.<br>"),

				# download preferences (for UPLOAD DATA)
				h3("Download Preferences"),
				HTML(
				  "It is a good idea to download your preferences for your records if you plan to use the Dam Decision Support Tool again.<br>"
				),
				downloadButton("downloadPreferenceSelection", "Download Preference Inputs (Step 3)", style="width:100%;"),

				# save preferences to server
				h3("Save Preferences"),
				HTML("Saving your preferences will load them automatically when you visit again. If you are using group mode, saving will add your preferences to the group average. Be aware: saving again will overwrite the old save.<br>"),
				actionButton("saveResultsToDjango", "Save Preferences", icon=icon("save"))
			)
		),



    # --------------------------------------------------------------------------------
		# Individual Dam Result Tabs
		# --------------------------------------------------------------------------------
		HTML("<li class='step-label'> Step 5: View Dam Specific Results </li>"),

		tabPanel("Dam 1: West Enfield",
			h2("Results: West Enfield Dam"),
			HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

			# output post generate
			div(id="generated-output-1",
				h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
				plotOutput("WSMPlot1b", height=600, width="100%"),
				downloadButton("DownloadDam1Plotb", "Download Graph", style="width:100%;"),
				HTML(
					 "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
					 preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
					 preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
					 <br>"
				),

				h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
				plotOutput("WSMPlot1a", height=600, width="100%"),
				downloadButton("DownloadDam1Plota", "Download Graph", style="width:100%;"),
				HTML(
					"<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
					of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
					drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
					that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
					this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
					preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
					removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
					<br>"
				)
			),

			h2('Data Inputs to these Results'),
		    HTML(
		      "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		      component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		      (raw and normalized) that lead to the final calculation.<br>"
		    ),

			div(id="dam-1-output",

				h3("Figure 3. User-Defined Preference Scores for West Enfield Dam"),
				plotOutput("PrefPlot1", height=graph_height, width=graph_width),
				downloadButton("DownloadPrefPlot1", "Download Graph", style="width:100%;"),
				HTML(
					"<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
					under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside \
					from Indigenous Cultural Traditions and Lifeways. If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
				),

				h3("Table 1. User-Defined Preference Scores for West Enfield Dam"),
				DT::dataTableOutput("RawPrefsDam1"),
				downloadButton("downloadData1", "Download Table", style="width:100%;"),
				HTML(
					"<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
					above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"
				),

				#raw data table/Matrix
				h3("Table 2. Data Values for West Enfield Dam"),
				DT::dataTableOutput("Dam1RawTable"),
		        downloadButton("DownloadDam1RawTable", "Download Table", style="width:100%;"),
				    downloadButton("DownloadDecisionMatrix1", "Download Dam Data", style="width:100%;"),
				
				HTML(
				  "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
				  remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
				  more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
				  in each column by clicking on the arrow next to the column header. Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
				  changes. They are presented here as the average of a range of possible values for this dam.<br>
				  <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
				),

				#normalized data table/Matrix
				h3("Table 3. Normalized Data Values for West Enfield Dam"),
				DT::dataTableOutput("Dam1NormTable"),
		        downloadButton("DownloadDam1NormTable", "Download Table", style="width:100%;"),
				HTML(
					"<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
					using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
					in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
					damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
					data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
					 <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		       range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		       and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		       (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		       consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		       (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
				),

				#weighted score data table/Matrix
				h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for West Enfield Dam"),
				DT::dataTableOutput("Dam1ScoreTable"),
		        downloadButton("DownloadDam1ScoreTable", "Download Table", style="width:100%;"),
				HTML(
					"<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
					If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
				)
			)
		),

		tabPanel("Dam 2: Medway",

		         h2("Results: Medway Dam"),
		         HTML(
               "Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"
             ),

		         # output post generate
		         div(id="generated-output-2",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot2b", height=600, width="100%"),
		             downloadButton("DownloadDam2Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),
		             
		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot2a", height=600, width="100%"),
		             downloadButton("DownloadDam2Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"

		             )
				 ),

		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),
		         
		         div(id="dam-2-output",
		             
		             h3("Figure 3. User-Defined Preference Scores for Medway Dam"),
		             plotOutput("PrefPlot2", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot2", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways. If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),
		             
		             h3("Table 1. User-Defined Preference Scores for Medway Dam"),
		             DT::dataTableOutput("RawPrefsDam2"),
		             downloadButton("downloadData2", "Download Medway", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),
		             
		             #raw data table/Matrix
		             h3("Table 2. Data Values for Medway Dam"),
		             DT::dataTableOutput("Dam2RawTable"),
		             downloadButton("DownloadDam2RawTable", "Download Table", style="width:100%;"),
					       downloadButton("DownloadDecisionMatrix2", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
    				      remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
    				      more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
    				      in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
    				      changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
    				      modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),

		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for Medway Dam"),
		             DT::dataTableOutput("Dam2NormTable"),
		             downloadButton("DownloadDam2NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
				      using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
				      in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
				      damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
				      data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
				      <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		          range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		          and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		          (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		          consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		          (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),

		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for Medway Dam"),
		             DT::dataTableOutput("Dam2ScoreTable"),
		             downloadButton("DownloadDam2ScoreTable", "Download Table", style="width:100%;"),
		             HTML(

		               "<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
				           If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )

				 )
		),

		tabPanel("Dam 3: East Millinocket",
		         h2("Results: East Millinocket Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-3",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot3b", height=600, width="100%"),
		             downloadButton("DownloadDam3Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot3a", height=600, width="100%"),
		             downloadButton("DownloadDam3Plota", "Download Graph", style="width:100%;"),
		             
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),
		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),

		         div(id="dam-3-output",

		             h3("Figure 3. User-Defined Preference Scores for East Millinocket Dam"),
		             plotOutput("PrefPlot3", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot3", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),

		             h3("Table 1. User-Defined Preference Scores for East Millinocket Dam"),
		             DT::dataTableOutput("RawPrefsDam3"),
		             downloadButton("downloadData3", "Download East Millinocket", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),

		             #raw data table/Matrix
		             h3("Table 2. Data Values for East Millinocket Dam"),
		             DT::dataTableOutput("Dam3RawTable"),
		             downloadButton("DownloadDam3RawTable", "Download Table", style="width:100%;"),
				         downloadButton("DownloadDecisionMatrix3", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
		               remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
		               more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
		               in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
		               changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
		               modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),

		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for East Millinocket Dam"),
		             DT::dataTableOutput("Dam3NormTable"),
		             downloadButton("DownloadDam3NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
		               using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
		               in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
		               damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
		               data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
		                <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		               range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		               and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		               (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		               consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		               (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),

		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for East Millinocket Dam"),
		             DT::dataTableOutput("Dam3ScoreTable"),
		             downloadButton("DownloadDam3ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
		               If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )

				 )
		),

		tabPanel("Dam 4: Dolby",
		         h2("Results: Dolby Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-4",
		             h3('Figure 4. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot4b", height=600, width="100%"),
		             downloadButton("DownloadDam4Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot4a", height=600, width="100%"),
		             downloadButton("DownloadDam4Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),
		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),
		         
		         div(id="dam-4-output",
		             
		             h3("Figure 3. User-Defined Preference Scores for Dolby Dam"),
		             plotOutput("PrefPlot4", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot4", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),
		             
		             h3("Table 1. User-Defined Preference Scores for Dolby Dam"),
		             DT::dataTableOutput("RawPrefsDam4"),
		             downloadButton("downloadData4", "Download Dolby", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),
		             
		             #raw data table/Matrix
		             h3("Table 2. Data Values for Dolby Dam"),
		             DT::dataTableOutput("Dam4RawTable"),
		             downloadButton("DownloadDam4RawTable", "Download Table", style="width:100%;"),
					       downloadButton("DownloadDecisionMatrix4", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
				      remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
				      more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
				      in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
				      changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
				      modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),
		             
		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for Dolby Dam"),
		             DT::dataTableOutput("Dam4NormTable"),
		             downloadButton("DownloadDam4NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
				      using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
				      in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
				      damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
				      data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
				      <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		          range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		          and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		          (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		          consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		          (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),
		             
		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for Dolby Dam"),
		             DT::dataTableOutput("Dam4ScoreTable"),
		             downloadButton("DownloadDam4ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
				      If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )
				 )
		 ),

		tabPanel("Dam 5: North Twin",
		         h2("Results: North Twin Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-5",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot5b", height=600, width="100%"),
		             downloadButton("DownloadDam5Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot5a", height=600, width="100%"),
		             downloadButton("DownloadDam5Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),
		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),

		         div(id="dam-5-output",

		             h3("Figure 3. User-Defined Preference Scores for North Twin Dam"),
		             plotOutput("PrefPlot5", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot5", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),

		             h3("Table 1. User-Defined Preference Scores for North Twin Dam"),
		             DT::dataTableOutput("RawPrefsDam5"),
		             downloadButton("downloadData5", "Download North Twin", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),
		             
		             #raw data table/Matrix
		             h3("Table 2. Data Values for North Twin Dam"),
		             DT::dataTableOutput("Dam5RawTable"),
		             downloadButton("DownloadDam5RawTable", "Download Table", style="width:100%;"),
					       downloadButton("DownloadDecisionMatrix5", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
		               remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
		               more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
		               in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
		               changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
		               modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),
		             
		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for North Twin Dam"),
		             DT::dataTableOutput("Dam5NormTable"),
		             downloadButton("DownloadDam5NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
		               using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
		               in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
		               damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
		               data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
		               <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		               range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		               and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		               (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		               consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		               (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),
		             
		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for North Twin Dam"),
		             DT::dataTableOutput("Dam5ScoreTable"),
		             downloadButton("DownloadDam5ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
		               If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )
				 )
		 ),

		tabPanel("Dam 6: Millinocket/Quakish",
		         h2("Results: Millinocket/Quakish Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-6",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot6b", height=600, width="100%"),
		             downloadButton("DownloadDam6Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot6a", height=600, width="100%"),
		             downloadButton("DownloadDam6Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),

		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),

		         div(id="dam-6-output",

		             h3("Figure 3. User-Defined Preference Scores for Millinocket/Quakish Dam"),
		             plotOutput("PrefPlot6", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot6", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from\
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),

		             h3("Table 1. User-Defined Preference Scores for Millinocket/Quakish Dam"),
		             DT::dataTableOutput("RawPrefsDam6"),
					 downloadButton("downloadData6", "Download Millinocket", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),

		             #raw data table/Matrix
		             h3("Table 2. Data Values for Millinocket/Quakish Dam"),
		             DT::dataTableOutput("Dam6RawTable"),
		             downloadButton("DownloadDam6RawTable", "Download Table", style="width:100%;"),
					       downloadButton("DownloadDecisionMatrix6", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
				      remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
				      more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
				      in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
				      changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
				      modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),

		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for Millinocket/Quakish Dam"),
		             DT::dataTableOutput("Dam6NormTable"),
		             downloadButton("DownloadDam6NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
				      using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
				      in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
				      damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
				      data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
				      <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		          range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		          and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		          (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		          consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		          (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),

		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for Millinocket/Quakish Dam"),
		             DT::dataTableOutput("Dam6ScoreTable"),
		             downloadButton("DownloadDam6ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
				      If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )
				 )
		 ),

		tabPanel("Dam 7: Millinocket Lake",
		         h2("Results: Millinocket Lake Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-7",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot7b", height=600, width="100%"),
		             downloadButton("DownloadDam7Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot7a", height=600, width="100%"),
		             downloadButton("DownloadDam7Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),

		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),

		         div(id="dam-7-output",

		             h3("Figure 3. User-Defined Preference Scores for Millinocket Lake Dam"),
		             plotOutput("PrefPlot7", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot7", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),

		             h3("Table 1. User-Defined Preference Scores for Millinocket Lake Dam"),
		             DT::dataTableOutput("RawPrefsDam7"),
		             downloadButton("downloadData7", "Download Millinocket Lake", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),

		             #raw data table/Matrix
		             h3("Table 2. Data Values for Millinocket Lake Dam"),
		             DT::dataTableOutput("Dam7RawTable"),
		             downloadButton("DownloadDam7RawTable", "Download Table", style="width:100%;"),
				         downloadButton("DownloadDecisionMatrix7", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
		               remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
		               more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
		               in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
		               changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
		               modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),

		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for Millinocket Lake Dam"),
		             DT::dataTableOutput("Dam7NormTable"),
		             downloadButton("DownloadDam7NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
		               using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
		               in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
		               damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
		               data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
		               <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		               range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		               and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		               (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		               consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		               (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),

		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for Millinocket Lake Dam"),
		             DT::dataTableOutput("Dam7ScoreTable"),
		             downloadButton("DownloadDam7ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
		               If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )
			 )
		 ),

		tabPanel("Dam 8: Ripogenus",
		         h2("Results: Ripogenus Dam"),
		         HTML("Now that you have seen the combined, top-ranked dam decision alternatives, we will drill down to explore the MCDA results for each individual dam.\
            Remember that these results have been estimated using site-specific data values.<br>"),

		         # output post generate
		         div(id="generated-output-8",
		             h3('Figure 1. Comparison of Final MCDA Scores for Each Decision Alternative'),
		             plotOutput("WSMPlot8b", height=600, width="100%"),
		             downloadButton("DownloadDam8Plotb", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 1: This graph shows the final MCDA score for each decision alternative for this specific dam, based on the MCDA calculation that includes the\
		               preferences you entered in Step 3 and the decision criteria data we collected/generated through our research. The taller the bar, the more preferred the decision alternative us under the \
		               preferences you supplied. Use this graph for a quick comparison between decision alternatives for a single dam.<br>\
		               <br>"
		             ),

		             h3('Figure 2. Contribution of Decision Criteria to Final MCDA Score for Dam Decision Alternatives'),
		             plotOutput("WSMPlot8a", height=600, width="100%"),
		             downloadButton("DownloadDam8Plota", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 2: This graph displays a zoomed-in version of Figure 1, with the final MCDA score bars for each decision alternative divided up by the contribution \
		               of each decision criterion to the final MCDA score. Similar to Figure 1, this graph includes your preference information and the researcher-defined data for each decision criterion. Use this graph to \
		               drill down and see which decision criteria are making up the largest portion of the final score for each decision alternative and whether you agree that is the way it should be. Remember, however, \
		               that these data take into account not only your preferences but also the research data. So, even if you gave a decision criterion a low rating in Step 3, it could still make up a large portion of \
		               this graph (unless you marked it as zero) because the data values may be larger relative to the full set of data values for that decision criteria for this dam. For example, if you assigned a 0.1 \
		               preference value to sea-run fish habitat area, you may be surprised to see a large segment for sea-run fish habitat in the Remove Dam decision alternative bar in this graph, but that could be because \
		               removing the dam increases fish habitat the most out of all of the decision alternatives for this dam site.<br>\
		               <br>"
		             )
				 ),

		         h2('Data Inputs to these Results'),
		         HTML(
		           "The results presented in Figures 1 and 2 were calculated by multiplying your preference inputs from Step 3 by the normalized researcher-defined decision criteria data. This section displays these \
		           component data sets, reminding you in table and graph form of the preferences you entered in Step 3 for each decision criterion and showing you the researcher-defined decision criteria data sets \
		           (raw and normalized) that lead to the final calculation.<br>"
		         ),

		         div(id="dam-8-output",

		             h3("Figure 3. User-Defined Preference Scores for Ripogenus Dam"),
		             plotOutput("PrefPlot8", height=graph_height, width=graph_width),
					downloadButton("DownloadPrefPlot8", "Download Graph", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Figure 3: This graph shows you the preferences you entered in Step 3 for each decision criterion. The scores are pulled directly from your slider bar settings \
		               under the West Enfield Dam tab and are not changed in any way. Note: Users may slide bars to indicate level of preference, but as of May 2020 we do not have data for these social decision criteria aside from \
		               Indigenous Cultural Traditions and Lifeways.If you wish to go back and change your settings, please do so before continuing. Remember to click GENERATE under Step 5. Multi-Dam Results. <br>"
		             ),

		             h3("Table 1. User-Defined Preference Scores for Ripogenus Dam"),
		             DT::dataTableOutput("RawPrefsDam8"),
		             downloadButton("downloadData8", "Download Ripogenus", style="width:100%;"),
		             HTML( "<br><br>This table just shows the same thing as Figure 3 but in table form. If you would like to see all decision criteria preferences values at once, please select Show 25 entries from the drop-down menu \
		                   above the table. Use the search bar to filter the table to a specific decision alternative  (e.g. Keep and Maintain Dam).<br>"),

		             #raw data table/Matrix
		             h3("Table 2. Data Values for Ripogenus Dam"),
		             DT::dataTableOutput("Dam8RawTable"),
		             downloadButton("DownloadDam8RawTable", "Download Table", style="width:100%;"),
					       downloadButton("DownloadDecisionMatrix8", "Download Dam Data", style="width:100%;"),
					
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 2. This table displays the raw data values we collected and/or calculated/generated through our research for each decision criterion and alternative. You may \
		               remember seeing these data when you clicked on the link for the data for this dam during the preference elicitation in Step 3. We include the raw data values again here to help make the MCDA calculations \
		               more transparent, so you can clearly see what goes into the final calculation that produces Figures 1 and 2 above. In addition, you can use this table to sort decision alternatives in ascending or descending order\
		               in each column by clicking on the arrow next to the column header . Note: fish survival values shown here are discrete, but in reality, the values are network-dependent and would be impacted by upstream or downstream\
		               changes. They are presented here as the average of a range of possible values for this dam, depending on what happens at other dams. This interaction between decisions at other dams and these decision criteria are\
		               modeled in the multi-objective optimization that leads to the final Map Recommendation.<br>
		               <br>Indigenous cultural traditions and lifeways data come from a survey of Penobscot Nation citizens (N=2), supported by informal conversations with Penobscot Nation citizens and representatives.<br>"
		             ),

		             #normalized data table/Matrix
		             h3("Table 3. Normalized Data Values for Ripogenus Dam"),
		             DT::dataTableOutput("Dam8NormTable"),
		             downloadButton("DownloadDam8NormTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><b>Results Interpretation</b> for Table 3. This table shows the data values from Table 2, normalized to be a score between 0 and 1 to make them comparable across different units. Normalization was performed \
		               using a min/max procedure: each raw data value was subtracted from the ideal value in the set (e.g., the maximum fish habitat area, for example) and divided by the difference between the maximum and minimum values\
		               in the set. The highest normalized values for most decision criteria, then, equal 1, and the lowest values equal 0. For decision criteria where lower values are more preferable (e.g. annuitized project cost, breach \
		               damage potential, number of properties impacted), the highest values equal 0, and the lowest values equal 1. This allows us to indicate that, for example, high costs are less desirable than low costs. The normalized \
		               data values in this table are multiplied by the preference weights displayed in Figure 3 and Table 1 to calculate the weighted scores in Table 4.<br>
		               <br><b>Normalization</b> is a mathematical procedure that sets data values relative to their actual range, where the least desirable value (e.g., highest cost, lowest greenhouse gas emission reductions) in the existing data \
		               range is set equal to 0 and the most desirable value (e.g., lowest cost, highest greenhouse gas emissions reductions) in the existing data range is set equal to 1. In this way, normalization allows us to compare apples \
		               and oranges as if they were apples and apples. The normalization (minimax, maximin) procedure for the Dam Decision Support Tool bounds data within a range specific to the individual dam, not to the entire set of dams \
		               (i.e., the normalization operation makes the criteria data comparable for decision alternatives at an individual dam). Just as it does not consider data values for decision criteria at other dams, normalization does not \
		               consider possible improvements to the existing data. The highest and lowest values for the decision criterion for the specific dam site at set equal to zero or one, depending on what is considered desirable for the criterion \
		               (e.g., for cost, the lowest value is most desirable). Future studies could update the normalization procedure to work not only within the range for a specific dam but also across the entire set of dams. <br>"
		             ),

		             #weighted score data table/Matrix
		             h3("Table 4. Weighted Scores for Individual Decision Criteria and Alternatives for Ripogenus Dam"),
		             DT::dataTableOutput("Dam8ScoreTable"),
		             downloadButton("DownloadDam8ScoreTable", "Download Table", style="width:100%;"),
		             HTML(
		               "<br><br><b>Results Interpretation</b> for Table 4. This table shows the result of multiplying the preference scores from Table 1 (and Figure 3) by the normalized decision criteria data values displayed in Table 3. \
		               If you add together all numbers in one row in this table you will get the final MCDA score for that decision alternative, the same results that are presented in Figures 1-2 above.<br>"
		             )
				 )
		),


		# Developer and aknowledgements secion
		HTML("<li class='step-label'>About</li>"),

		tabPanel("Limitations",
		   h2("Limitations"),
		   HTML(
		    "This Dam Decision Support Tool is not in any way associated with FERC requirements for the relicensing process. While the Tool can be used to understand the impact of preferences on decision making, it reflects only the user's preference-driven outcomes. Other people will have different preferences, which may result \
		    in different outcomes. Using the Tool to simulate others' preferences is one way of exploring the impact that different preferences have on the outcome.<br> \
				<br>Note: all the decision criteria mentioned herein are defined specifically in relation to hydropower dams. This list is non-exhaustive; it does not include all decision criteria that may be important to all people. The criteria identified in this list are representative of current issues important to dam decision making \
				as expressed by stakeholders in interview.  A more extensive discussion of decision criteria-specific limitations and ideas for future studies is included in the list of decision criteria. <br>\
				<br>Existing state and federal laws also limit the usefulness of these results/outcomes. For example: (1) Penobscot Nation subsistence fishing law, (2) Endangered Species Act (often used as a regulatory 'hammer' in dam decisions by enforcing federal agencies), (3) Clean Water Act (401 water quality certification), \
		    (4) Federal Power Act, (5) municipal ordinances (a town can explicitly specify that no new dams may be constructed or that no hydropower operations may be installed within town boundaries) all have direct legal bearing on the outcome of a FERC relicensing process. If brought to bear in the decision-making process, such \
		    laws and regulations may exclude decision alternatives from the 'problem set' altogether. Future work could involve possible regulatory 'scenarios' under which particular 'problem sets' of decision alternatives are relevant.<br>"
		         )
		),
		
		tabPanel("Developers",
			 h2("Developers"),
			 HTML(
				"<b>Dr. Emma Fox </b>- Lead Developer (Graduate Research Assistant, University of Maine Ecology and Environmental Science Program) for the Dam Decision Support Tool. Designed user interface and initial server functionality. Adjusted WSM function for new dam decision application and advised model-related changes. \
				Designed and wrote app text, and designed accompanying multi-dam decision example fact sheets, designed and wrote text for Dam Toolbox.<br> \
				<br><b>Dr. Sharon J. W. Klein </b>- Development Advisor (Associate Professor, University of Maine School of Economics). Helped develop and advise concept for the Dam Decision Support Tool, advised user-friendliness enhancements to the Dam Decision Support Tool and user interface/features, refined criteria \
				definitions, revised app text.<br> \
				<br><b>Dr. Samuel G. Roy </b>- Feature Developer (Postdoctoral Researcher, Senator George J. Mitchell Center for Sustainability Solutions, University of Maine) for the Dam Decision Support Tool. Created original Matlab scripts for multi-rank calculation, fitness functions for network-dependent criteria, and all maps.<br>\
				<br><b>William Winslow </b>- Developer (Software Engineer, GeoSpatial Science Center(GSSC), University of New Hampshire). Deployment (Docker, Apache), server code reorganization, debugging/bug fixes, misc. feature implementations for user interface and app function.<br>"
			 )
		 ),


		tabPanel("Acknowledgements",
			 h2("Acknowledgments"),
			 HTML(
				 "We would like to thank Garrett Raymond for his technical consultation on R Shiny design.<br> \
				 <br> This tool was developed by researchers in the Future of Dams project. Support for the Future of Dams project is provided by the National Science Foundation\'s Research Infrastructure Improvement NSF #IIA-1539071, \
				 USDA National Institute of Food and Agriculture, Hatch project 0230040, and Department of the Interior, \
				 U.S. Geological Survey Grant No. G16AP00057 through the Senator George J. Mitchell Center at the University of Maine.<br>\
				 <br> The Data Discovery Center at the University of New Hampshire is the host for this Dam Decision Support Tool. https://ddc.unh.edu <br>"
			 ),
			 
			 h2("Citations (in alphabetical order)"),
			 HTML(
				 "B. Blachly and E. Uchida, Estimating the Marginal Cost of Dam Removal, in Environmental and Natural Resource Economics Working Papers, 2017, vol. Paper 2.<br>\
				 <br>C. Song, K. H. Gardner, S. J. W. Klein, S. P. Souza, and W. Mo, Cradle-to-grave greenhouse gas emissions from dams in the United States of America, Renew. Sustain. Energy Rev., vol. 90, pp. 945-956, Jul. 2018, doi: 10.1016/j.rser.2018.04.014.<br>\
				 <br>D. G. Hall, K. S. Reeves, J. Brizzee, R. D. Lee, G. R. Carroll, and G. L. Sommers, Feasibility Assessment of the Water Energy Resources of the United States for New Low Power and Small Hydro Classes of Hydroelectric Plants, Idaho National Laboratory, DOE-ID-11263, Jan. 2006. Accessed: Jun. 06, 2016. [Online]. \
				 Available: http://www1.eere.energy.gov/water/pdfs/doewater-11263.pdf.<br>\
				 <br>FERC: Documents & Filing - FERC Online - eLibrary. https://www.ferc.gov/docs-filing/elibrary.asp (accessed Mar. 13, 2020).<br>\
				 <br>Form EIA-923 detailed data with previous form data (EIA-906/920). https://www.eia.gov/electricity/data/eia923/ (accessed Jan. 16, 2020).<br>\
				 <br>P. W. O'Connor, S. T. DeNeale, D. R. Chalise, E. Centurion, and A. Maloof, Hydropower Baseline Cost Modeling, Version 2, Oak Ridge National Laboratory (ORNL), ORNL/TM-2015/471, Sep. 2015. Accessed: Apr. 20, 2016. [Online]. Available: http://info.ornl.gov/sites/publications/files/Pub58666.pdf.<br>\
				 <br>Roy, S.G., Uchida, E., de Souza, S.P., Blachly, B., Fox, E., Gardner, K., Gold, A.J., Jansujwicz, J., Klein, S., McGreavy, B., Mo, W., Smith, S.M.C., Vogler, E., Wilson, K., Zydlewski, J., & Hart, D. (2018). A multiscale approach to balance trade-offs among dam infrastructure, river restoration, and cost. Proceedings of the National \
				 Academy of Sciences, 201807437. doi:10.1073/pnas.1807437115.<br>\
				 <br>S. J. Klein and S. Whalley, Comparing the sustainability of US electricity options through multi-criteria decision analysis, Energy Policy, vol. 79, pp. 127-149, 2015.<br>\
				 <br>W. Short, D. J. Packey, and T. Holt, A manual for the economic evaluation of energy efficiency and renewable energy technologies, NREL/TP--462-5173, 35391, Mar. 1995. doi: 10.2172/35391.<br>\
				 "
			 ),
			 
			 h2("Software and Programs Used (in alphabetical order)"),
			 HTML(
			   "Alex Couture-Beil (2018). rjson: JSON for R. R package version 0.2.20. https://CRAN.R-project.org/package=rjson&nbsp;. <br>\
			   <br>Alex Gaynor, Carlton Gibson (2020) django-filter, version 2.3.0. https://django-filter.readthedocs.io/en/stable/&nbsp;.<br>\
			   <br>C. Sievert (2020). Interactive Web-Based Data Visualization with R, plotly, and shiny. Chapman and Hall/CRC Florida. <br>\
			   <br>Dean Attali (2020). shinyjs: Easily Improve the User Experience of Your Shiny Apps in Seconds. R package version 1.1. https://CRAN.R-project.org/package=shinyjs&nbsp;. <br>\
			   <br>Django (2020). Django version 2.2. Retrieved from https://djangoproject.com&nbsp;.<br>\
			   <br>Erich Neuwirth (2014). RColorBrewer: ColorBrewer Palettes. R package version 1.1-2. https://CRAN.R-project.org/package=RColorBrewer&nbsp;. <br>\
			   <br>Federico Di Gregorio, Daniele Varrazzo, The Psycopg Team (2020). psycopg2. https://www.psycopg.org/docs/index.html&nbsp;. <br>\
			   <br>Hadley Wickham, Romain Fran&#231;ois, Lionel Henry and Kirill M&#252;ller (2018). dplyr: A Grammar of Data Manipulation. R package version 0.7.6. https://CRAN.R-project.org/package=dplyr&nbsp;. <br>\
			   <br>Hadley Wickham (2009). ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York. https://cran.r-project.org/web/packages/ggplot2/index.html&nbsp;.<br>\
			   <br>Joe Cheng, Bhaskar Karambelkar and Yihui Xie (2019). leaflet: Create Interactive Web Maps with the JavaScript Leaflet Library. R package version 2.0.3. https://CRAN.R-project.org/package=leaflet&nbsp;. <br>\
			   <br>Matt Dowle and Arun Srinivasan (2019). data.table: Extension of data.frame. R package version 1.12.8.https://CRAN.R-project.org/package=data.table&nbsp;. <br>\
			   <br>Python Software Foundation (2020). Python Language Reference, version 3.7. https://docs.python.org/3/reference/&nbsp;. <br>\
			   <br>The PostgreSQL Global Development Group (2020). PostgreSQL database, version 9.6. https://www.postgresql.org/docs/9.6/reference.html&nbsp;.<br>\
			   <br>Tom Christie, Encode OSS Ltd. (2020). Django REST Framework, version 3.11. https://www.django-rest-framework.org/&nbsp;.<br>\
			   <br>R Core Team (2017). R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria. URL https://www.R-project.org/&nbsp;.<br>\
			   <br>RStudio Team (2015). RStudio: Integrated Development for R. RStudio, Inc., Boston, MA URL http://www.rstudio.com/&nbsp;.<br>\
			   <br>Simon Urbanek and Jeffrey Horner (2020). Cairo: R Graphics Device using Cairo Graphics Library for Creating High-Quality Bitmap (PNG, JPEG, TIFF), Vector (PDF, SVG, PostScript) and Display (X11 and Win32) Output.R package version 1.5-12. https://CRAN.R-project.org/package=Cairo&nbsp;.<br>\
			   <br>Tony Plate and Richard Heiberger (2016). abind: Combine Multidimensional Arrays. R package version 1.4-5. https://CRAN.R-project.org/package=abind&nbsp;.<br>\
			   <br>Winston Chang, Joe Cheng, JJ Allaire, Yihui Xie and Jonathan McPherson (2020). shiny: Web Application Framework for R. R package version 1.4.0.2. https://CRAN.R-project.org/package=shiny&nbsp;.<br>\
			   <br>Yihui Xie, Joe Cheng and Xianying Tan (2020). DT: A Wrapper of the JavaScript Library DataTables. R package version 0.13. https://CRAN.R-project.org/package=DT&nbsp;.<br>\
			   "
			 )
		)
	) # end of navigation panel
))

# create the application with ui in this file and imported server from server.R
shinyApp(ui, server)
